<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>cordova 基础 | 哒哒的博客</title>
    <meta name="description" content="哒哒练习写文章做记录的地方">
    <link rel="icon" href="/blog/img/logo.png">
    
    <link rel="preload" href="/blog/assets/css/0.styles.1846c831.css" as="style"><link rel="preload" href="/blog/assets/js/app.0d710046.js" as="script"><link rel="preload" href="/blog/assets/js/2.3724615d.js" as="script"><link rel="preload" href="/blog/assets/js/26.244f0e68.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.b61dd10e.js"><link rel="prefetch" href="/blog/assets/js/11.e5fbb993.js"><link rel="prefetch" href="/blog/assets/js/12.6072f3fe.js"><link rel="prefetch" href="/blog/assets/js/13.119ec9f1.js"><link rel="prefetch" href="/blog/assets/js/14.50793965.js"><link rel="prefetch" href="/blog/assets/js/15.6b54485c.js"><link rel="prefetch" href="/blog/assets/js/16.31f68c05.js"><link rel="prefetch" href="/blog/assets/js/17.4e4585ba.js"><link rel="prefetch" href="/blog/assets/js/18.68501181.js"><link rel="prefetch" href="/blog/assets/js/19.0e5b6c69.js"><link rel="prefetch" href="/blog/assets/js/20.d751fd77.js"><link rel="prefetch" href="/blog/assets/js/21.61020ecb.js"><link rel="prefetch" href="/blog/assets/js/22.6843e775.js"><link rel="prefetch" href="/blog/assets/js/23.c4fe93cf.js"><link rel="prefetch" href="/blog/assets/js/24.92a8097d.js"><link rel="prefetch" href="/blog/assets/js/25.a3f181ca.js"><link rel="prefetch" href="/blog/assets/js/27.87040a01.js"><link rel="prefetch" href="/blog/assets/js/28.1ce7f872.js"><link rel="prefetch" href="/blog/assets/js/29.a62422be.js"><link rel="prefetch" href="/blog/assets/js/3.e00b5bcc.js"><link rel="prefetch" href="/blog/assets/js/4.15bd42cb.js"><link rel="prefetch" href="/blog/assets/js/5.37f72eb9.js"><link rel="prefetch" href="/blog/assets/js/6.f95e396f.js"><link rel="prefetch" href="/blog/assets/js/7.3e10e91f.js"><link rel="prefetch" href="/blog/assets/js/8.853705b0.js"><link rel="prefetch" href="/blog/assets/js/9.39b50577.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.1846c831.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">哒哒的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/JS/object.html" class="nav-link">JS之面向对象程序设计和继承</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/base.html" class="nav-link">JS基础知识总结</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/copy.html" class="nav-link">JS深浅拷贝</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/design.html" class="nav-link">JS设计模式</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/this.html" class="nav-link">JS之this指向</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/ifelse.html" class="nav-link">JS条件语句</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/simple.html" class="nav-link">JS之代码简洁之道</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ReactNative</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/ReactNative/summary.html" class="nav-link">ReactNative技术栈总结</a></li><li class="dropdown-item"><!----> <a href="/blog/ReactNative/record.html" class="nav-link">ReactNative知识点记录</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Vue/base.html" class="nav-link">vue基础知识</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/vuex.html" class="nav-link">vuex基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">混合开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/hybird/cordova.html" class="nav-link router-link-exact-active router-link-active">cordova基础</a></li><li class="dropdown-item"><!----> <a href="/blog/hybird/vueCordova.html" class="nav-link">vue+cordova思考</a></li><li class="dropdown-item"><!----> <a href="/blog/hybird/uniapp.html" class="nav-link">小程序多端框架研究</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Node/koa2.html" class="nav-link">koa2+sequelize初探</a></li><li class="dropdown-item"><!----> <a href="/blog/Node/fullStack.html" class="nav-link">全栈工程思考</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">网络</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/http/base.html" class="nav-link">http协议总结</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">构建</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/goujian/webpack.html" class="nav-link">webpack学习</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/JS/object.html" class="nav-link">JS之面向对象程序设计和继承</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/base.html" class="nav-link">JS基础知识总结</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/copy.html" class="nav-link">JS深浅拷贝</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/design.html" class="nav-link">JS设计模式</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/this.html" class="nav-link">JS之this指向</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/ifelse.html" class="nav-link">JS条件语句</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/simple.html" class="nav-link">JS之代码简洁之道</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ReactNative</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/ReactNative/summary.html" class="nav-link">ReactNative技术栈总结</a></li><li class="dropdown-item"><!----> <a href="/blog/ReactNative/record.html" class="nav-link">ReactNative知识点记录</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Vue/base.html" class="nav-link">vue基础知识</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/vuex.html" class="nav-link">vuex基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">混合开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/hybird/cordova.html" class="nav-link router-link-exact-active router-link-active">cordova基础</a></li><li class="dropdown-item"><!----> <a href="/blog/hybird/vueCordova.html" class="nav-link">vue+cordova思考</a></li><li class="dropdown-item"><!----> <a href="/blog/hybird/uniapp.html" class="nav-link">小程序多端框架研究</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Node/koa2.html" class="nav-link">koa2+sequelize初探</a></li><li class="dropdown-item"><!----> <a href="/blog/Node/fullStack.html" class="nav-link">全栈工程思考</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">网络</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/http/base.html" class="nav-link">http协议总结</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">构建</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/goujian/webpack.html" class="nav-link">webpack学习</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>cordova 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/hybird/cordova.html#cordova-基础" class="sidebar-link">cordova 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/hybird/cordova.html#什么是-cordova" class="sidebar-link">什么是 cordova</a></li><li class="sidebar-sub-header"><a href="/blog/hybird/cordova.html#常用命令" class="sidebar-link">常用命令</a></li></ul></li><li><a href="/blog/hybird/cordova.html#cordova-实战" class="sidebar-link">cordova 实战</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/hybird/cordova.html#一、-跑通-cordova" class="sidebar-link">一、 跑通 cordova</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/hybird/cordova.html#尝试一：生成一个-cordova-壳子，将工程代码打包，放入壳子对应的位子再用-cordova-打包生成-app-文件，在手机上看效果" class="sidebar-link">尝试一：生成一个 cordova 壳子，将工程代码打包，放入壳子对应的位子再用 cordova 打包生成 app 文件，在手机上看效果</a></li><li class="sidebar-sub-header"><a href="/blog/hybird/cordova.html#尝试-2" class="sidebar-link">尝试 2</a></li><li class="sidebar-sub-header"><a href="/blog/hybird/cordova.html#cordova-requirements" class="sidebar-link">cordova requirements</a></li><li class="sidebar-sub-header"><a href="/blog/hybird/cordova.html#打包流程" class="sidebar-link">打包流程</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="cordova-基础"><a href="#cordova-基础" aria-hidden="true" class="header-anchor">#</a> cordova 基础</h2> <h3 id="什么是-cordova"><a href="#什么是-cordova" aria-hidden="true" class="header-anchor">#</a> 什么是 cordova</h3> <blockquote><p>通过写 web app ,根据输出平台要求不同，提供不同类型的安装包；个人感觉 cordova 就是把 webapp 包了一层，让其 html,css,js 能跑在不同的客户端</p></blockquote> <h3 id="常用命令"><a href="#常用命令" aria-hidden="true" class="header-anchor">#</a> 常用命令</h3> <ul><li>cordova install android 将编译好的应用程序安装到模拟器上</li> <li>cordova emulate android 在模拟器上运行</li> <li>cordova serve android 在浏览器中运行</li> <li>cordova build android 打包项目到 android 平台</li></ul> <h2 id="cordova-实战"><a href="#cordova-实战" aria-hidden="true" class="header-anchor">#</a> cordova 实战</h2> <ol><li>安装
<blockquote><p>通过 npm install -g cordova</p></blockquote></li> <li>创建一个 app
<blockquote><p>cordova create [appname]</p></blockquote></li> <li>添加一个平台
<blockquote><p>cordova platform add ios/android;不清楚可以添加什么平台时使用：cordova platform 查看</p></blockquote></li> <li>运行
<blockquote><p>cordova run android/ios</p></blockquote></li> <li>config.xml</li></ol> <ul><li>widget 这是我们在创建应用程序时指定的应用程序反向域值。</li> <li>name 我们在创建应用程序时指定的应用程序名称。</li> <li>description 应用程式说明。</li> <li>author 应用程式的作者。</li> <li>content 应用程序的起始页。 它位于 www 目录内。</li> <li>plugin 当前安装的插件。</li> <li>access 用于控制对外部域的访问。 默认的 origin 值设置为 * ，这意味着允许访问任何域。 此值不允许打开某些特定的网址来保护信息。</li> <li>allow-intent 用于控制对外部域的访问。 默认的 origin 值设置为 * ，这意味着允许访问任何域。 此值不允许打开某些特定的网址来保护信息。...</li> <li>platform 构建应用程序的平台。</li></ul> <h2 id="一、-跑通-cordova"><a href="#一、-跑通-cordova" aria-hidden="true" class="header-anchor">#</a> 一、 跑通 cordova</h2> <blockquote><p>了解 cordova 打包发布流程，为代码在真机上调试打基础</p></blockquote> <h3 id="尝试一：生成一个-cordova-壳子，将工程代码打包，放入壳子对应的位子再用-cordova-打包生成-app-文件，在手机上看效果"><a href="#尝试一：生成一个-cordova-壳子，将工程代码打包，放入壳子对应的位子再用-cordova-打包生成-app-文件，在手机上看效果" aria-hidden="true" class="header-anchor">#</a> 尝试一：生成一个 cordova 壳子，将工程代码打包，放入壳子对应的位子再用 cordova 打包生成 app 文件，在手机上看效果</h3> <ol><li>安装 cordova：npm install -g cordova；</li> <li>生成项目壳子：cordova create myApp</li></ol> <ul><li>config.xml 目录： cordova 的配置文件</li> <li>hooks 目录：存放自定义 cordova 命令的脚本文件。每个 project 命令都可以定义 before 和 after 的 Hook，比如：
before_build、after_build。</li> <li>platforms 目录：各个平台的原生代码工程，不要手动修改，因为在 build 的时候会被覆盖。</li> <li>plugins 目录： 插件目录（cordova 提供的原生 API 也是以插件的形式提供的）。</li> <li>www 目录：源代码目录，在 cordova prepare 的时候会被 copy 到各个平台工程的 assets\www 目录中。
其中 index.html 为应用的入口文件。</li></ul> <ol start="3"><li>查看可添加的平台：cordova platform ls ;添加平台：cordova platform add Android/ios</li> <li>打包工程代码：npm run build</li> <li>将生成的 www 文件替换入壳子中</li> <li>打包壳子和项目代码:cordova build，生成对应 apk 文件</li></ol> <ul><li>如果是 android 需下载 jdk</li> <li>如果是 ios 需下载 xcode</li> <li>为了让项目更好的测试和运行，下载 Android Studio 和 xcode 跑两端</li></ul> <h3 id="尝试-2"><a href="#尝试-2" aria-hidden="true" class="header-anchor">#</a> 尝试 2</h3> <blockquote><p>当前项目是基于 vue 集成了 cordova，通过命令行直接打包，不需要再造壳子</p></blockquote> <ol><li>直接通过 npm run cordova，下载 cordova 对应的依赖</li> <li>必须先 npm run build 之后再执行上述命令</li> <li>本机需要有 cordova 环境，即需下载 xcode,androidStudio,jdk，cocoapods 等
<blockquote><p>下载 cocoapods 时通过命令 sudo gem install -n /usr/local/bin cocoapods 下载最新的</p></blockquote></li></ol> <ul><li>管理 rvm 命令：rvm list ,rvm --default use []</li></ul> <p>##二、 xcode 问题记录：</p> <ol><li>cordova-plugin-uniquedeviceid 和 phonegap-plugin-push 无法通过 cordova prepare android/ios 下载
通过 cordova plugin add 【依赖名】解决</li> <li>使用 xcode 报错：Module 'FirebaseInstanceID' not found；</li></ol> <ul><li>尝试安装 cocoapods，并 pod setup（安装有点慢）</li> <li>cordova platform rm ios,删掉原来的 ios 项目</li> <li>cordova platform add ios ,加入</li> <li>进入 platform/ios 目录，执行 pod install --verbose</li></ul> <ol start="3"><li>xcode 调试</li></ol> <ul><li>在 safari 中进入 Preferences-Advanced-show Develop menu</li> <li>safari 菜单栏中 Develop-对应的模拟机-对应的网页</li></ul> <p>##三、 Android Studio 问题记录</p> <ol><li>找不到 com.lint; 在 allproject 中加入 google()，将 android 删掉在加入</li> <li>找不到 google-service.json，去 firebase 下载后运行再删掉</li> <li>暂时还无法在 androidstudio 的模拟机上运行，google-services.json 一直找不到；猜测：</li></ol> <ul><li><p>需要购买谷歌服务，或者公司已经有对应账号</p></li> <li><p>安卓模拟机无法访问到谷歌服务，服务无法连接</p></li> <li><p>其他先决条件</p></li> <li><p><strong>解决方案：</strong></p></li> <li><p>删掉 android 平台在加入时，默认会加入最新的，需要指定为 6.4.0</p></li> <li><p>android sdk 必须使用 26，不要升级</p></li> <li><p>删除安卓平台在加入</p></li></ul> <ol start="4"><li>AAPT2 error，找不到 ttIndex 和 fontVariationSettings</li></ol> <ul><li><strong>解决方案：</strong><br>
找到 project/build.gradle 文件,添加以下代码</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token comment">// 在build.gradle(Module:app)单独配置</span>
 configurations<span class="token punctuation">.</span>all <span class="token punctuation">{</span>
     resolutionStrategy <span class="token punctuation">{</span>
             force <span class="token string">'com.android.support:support-v4:27.1.0'</span>
      <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div><ol start="5"><li>unmearge max 错误</li></ol> <ul><li><strong>解决方案</strong>
在 project/build.gradle 中注释掉以下代码</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code> dependencies <span class="token punctuation">{</span>
    implementation <span class="token function">fileTree</span><span class="token punctuation">(</span>dir<span class="token punctuation">:</span> <span class="token string">'libs'</span><span class="token punctuation">,</span> include<span class="token punctuation">:</span> <span class="token string">'*.jar'</span><span class="token punctuation">)</span>
    <span class="token comment">// SUB-PROJECT DEPENDENCIES START</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span><span class="token function">project</span><span class="token punctuation">(</span>path<span class="token punctuation">:</span> <span class="token string">&quot;CordovaLib&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    compile <span class="token string">&quot;com.android.support:support-v4:24.1.1+&quot;</span>
    compile <span class="token string">&quot;com.android.support:support-v4:+&quot;</span>
<span class="token comment">// 下面这行和上面有冲突</span>
<span class="token comment">//    compile &quot;com.android.support:support-v13:26.+&quot;</span>
    compile <span class="token string">&quot;me.leolin:ShortcutBadger:1.1.17@aar&quot;</span>
    compile <span class="token string">&quot;com.google.firebase:firebase-messaging:11.6.2&quot;</span>
    <span class="token comment">// SUB-PROJECT DEPENDENCIES END</span>
<span class="token punctuation">}</span>
</code></pre></div><p>##四、 总结</p> <h3 id="cordova-requirements"><a href="#cordova-requirements" aria-hidden="true" class="header-anchor">#</a> cordova requirements</h3> <p><strong>安卓</strong></p> <ul><li>java jdk ：通过 www.oracle.com 下载 8.0 版本</li> <li>android sdk：安装 android studio 后自动下载</li> <li>android target：安装 android studio 后自动下载</li> <li>gradle ：通过 brew install gradle 下载</li></ul> <p><strong>ios</strong></p> <ul><li>macOS：系统自带</li> <li>xcode：app store 下载</li> <li>ios-deploy：npm install -g ios-deploy 下载</li> <li>cocoapods：先下载 rvm，通过 rvm 的 sudo gem install -n /usr/local/bin cocoapods 下载</li></ul> <h3 id="打包流程"><a href="#打包流程" aria-hidden="true" class="header-anchor">#</a> 打包流程</h3> <ol><li>先使用 npm run build 生成 web 包</li> <li>在通过 cordova build android/ios 来生成安卓和 ios 版本</li> <li>通过 as 或者 xcode 模拟器看效果</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.0d710046.js" defer></script><script src="/blog/assets/js/2.3724615d.js" defer></script><script src="/blog/assets/js/26.244f0e68.js" defer></script>
  </body>
</html>
