<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ReactNative 知识点记录 | 哒哒的博客</title>
    <meta name="description" content="哒哒练习写文章做记录的地方">
    <link rel="icon" href="/blog/img/logo.png">
    
    <link rel="preload" href="/blog/assets/css/0.styles.1846c831.css" as="style"><link rel="preload" href="/blog/assets/js/app.0d710046.js" as="script"><link rel="preload" href="/blog/assets/js/2.3724615d.js" as="script"><link rel="preload" href="/blog/assets/js/19.0e5b6c69.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.b61dd10e.js"><link rel="prefetch" href="/blog/assets/js/11.e5fbb993.js"><link rel="prefetch" href="/blog/assets/js/12.6072f3fe.js"><link rel="prefetch" href="/blog/assets/js/13.119ec9f1.js"><link rel="prefetch" href="/blog/assets/js/14.50793965.js"><link rel="prefetch" href="/blog/assets/js/15.6b54485c.js"><link rel="prefetch" href="/blog/assets/js/16.31f68c05.js"><link rel="prefetch" href="/blog/assets/js/17.4e4585ba.js"><link rel="prefetch" href="/blog/assets/js/18.68501181.js"><link rel="prefetch" href="/blog/assets/js/20.d751fd77.js"><link rel="prefetch" href="/blog/assets/js/21.61020ecb.js"><link rel="prefetch" href="/blog/assets/js/22.6843e775.js"><link rel="prefetch" href="/blog/assets/js/23.c4fe93cf.js"><link rel="prefetch" href="/blog/assets/js/24.92a8097d.js"><link rel="prefetch" href="/blog/assets/js/25.a3f181ca.js"><link rel="prefetch" href="/blog/assets/js/26.244f0e68.js"><link rel="prefetch" href="/blog/assets/js/27.87040a01.js"><link rel="prefetch" href="/blog/assets/js/28.1ce7f872.js"><link rel="prefetch" href="/blog/assets/js/29.a62422be.js"><link rel="prefetch" href="/blog/assets/js/3.e00b5bcc.js"><link rel="prefetch" href="/blog/assets/js/4.15bd42cb.js"><link rel="prefetch" href="/blog/assets/js/5.37f72eb9.js"><link rel="prefetch" href="/blog/assets/js/6.f95e396f.js"><link rel="prefetch" href="/blog/assets/js/7.3e10e91f.js"><link rel="prefetch" href="/blog/assets/js/8.853705b0.js"><link rel="prefetch" href="/blog/assets/js/9.39b50577.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.1846c831.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">哒哒的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/JS/object.html" class="nav-link">JS之面向对象程序设计和继承</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/base.html" class="nav-link">JS基础知识总结</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/copy.html" class="nav-link">JS深浅拷贝</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/design.html" class="nav-link">JS设计模式</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/this.html" class="nav-link">JS之this指向</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/ifelse.html" class="nav-link">JS条件语句</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/simple.html" class="nav-link">JS之代码简洁之道</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ReactNative</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/ReactNative/summary.html" class="nav-link">ReactNative技术栈总结</a></li><li class="dropdown-item"><!----> <a href="/blog/ReactNative/record.html" class="nav-link router-link-exact-active router-link-active">ReactNative知识点记录</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Vue/base.html" class="nav-link">vue基础知识</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/vuex.html" class="nav-link">vuex基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">混合开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/hybird/cordova.html" class="nav-link">cordova基础</a></li><li class="dropdown-item"><!----> <a href="/blog/hybird/vueCordova.html" class="nav-link">vue+cordova思考</a></li><li class="dropdown-item"><!----> <a href="/blog/hybird/uniapp.html" class="nav-link">小程序多端框架研究</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Node/koa2.html" class="nav-link">koa2+sequelize初探</a></li><li class="dropdown-item"><!----> <a href="/blog/Node/fullStack.html" class="nav-link">全栈工程思考</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">网络</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/http/base.html" class="nav-link">http协议总结</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">构建</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/goujian/webpack.html" class="nav-link">webpack学习</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/JS/object.html" class="nav-link">JS之面向对象程序设计和继承</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/base.html" class="nav-link">JS基础知识总结</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/copy.html" class="nav-link">JS深浅拷贝</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/design.html" class="nav-link">JS设计模式</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/this.html" class="nav-link">JS之this指向</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/ifelse.html" class="nav-link">JS条件语句</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/simple.html" class="nav-link">JS之代码简洁之道</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ReactNative</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/ReactNative/summary.html" class="nav-link">ReactNative技术栈总结</a></li><li class="dropdown-item"><!----> <a href="/blog/ReactNative/record.html" class="nav-link router-link-exact-active router-link-active">ReactNative知识点记录</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Vue/base.html" class="nav-link">vue基础知识</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/vuex.html" class="nav-link">vuex基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">混合开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/hybird/cordova.html" class="nav-link">cordova基础</a></li><li class="dropdown-item"><!----> <a href="/blog/hybird/vueCordova.html" class="nav-link">vue+cordova思考</a></li><li class="dropdown-item"><!----> <a href="/blog/hybird/uniapp.html" class="nav-link">小程序多端框架研究</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Node/koa2.html" class="nav-link">koa2+sequelize初探</a></li><li class="dropdown-item"><!----> <a href="/blog/Node/fullStack.html" class="nav-link">全栈工程思考</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">网络</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/http/base.html" class="nav-link">http协议总结</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">构建</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/goujian/webpack.html" class="nav-link">webpack学习</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ReactNative 知识点记录</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/ReactNative/record.html#一、-数据-状态方案记录" class="sidebar-link">一、 数据+状态方案记录</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/ReactNative/record.html#二、罗列知识点" class="sidebar-link">二、罗列知识点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/ReactNative/record.html#基本知识" class="sidebar-link">基本知识</a></li><li class="sidebar-sub-header"><a href="/blog/ReactNative/record.html#四大支柱" class="sidebar-link">四大支柱</a></li><li class="sidebar-sub-header"><a href="/blog/ReactNative/record.html#板块设计" class="sidebar-link">板块设计</a></li><li class="sidebar-sub-header"><a href="/blog/ReactNative/record.html#插件和原生" class="sidebar-link">插件和原生</a></li></ul></li><li><a href="/blog/ReactNative/record.html#三、-热更新和热部署" class="sidebar-link">三、 热更新和热部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/ReactNative/record.html#原理" class="sidebar-link">原理</a></li><li class="sidebar-sub-header"><a href="/blog/ReactNative/record.html#具体配置地址" class="sidebar-link">具体配置地址</a></li><li class="sidebar-sub-header"><a href="/blog/ReactNative/record.html#一些命令" class="sidebar-link">一些命令</a></li></ul></li><li><a href="/blog/ReactNative/record.html#四、-react-navigation" class="sidebar-link">四、 react-navigation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/ReactNative/record.html#简介" class="sidebar-link">简介</a></li></ul></li><li><a href="/blog/ReactNative/record.html#五、-三方处理" class="sidebar-link">五、 三方处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/ReactNative/record.html#需要-link" class="sidebar-link">需要 link</a></li></ul></li><li><a href="/blog/ReactNative/record.html#六、-当-androidx-和-support-冲突时" class="sidebar-link">六、 当 androidx 和 support 冲突时</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/ReactNative/record.html#七、-集成自定义-iconfont" class="sidebar-link">七、 集成自定义 iconfont</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/ReactNative/record.html#八、-国际化" class="sidebar-link">八、 国际化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/ReactNative/record.html#问题" class="sidebar-link">问题</a></li><li class="sidebar-sub-header"><a href="/blog/ReactNative/record.html#解决思路" class="sidebar-link">解决思路</a></li></ul></li><li><a href="/blog/ReactNative/record.html#九、-启动图和图标" class="sidebar-link">九、 启动图和图标</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/ReactNative/record.html#图标" class="sidebar-link">图标</a></li><li class="sidebar-sub-header"><a href="/blog/ReactNative/record.html#启动图" class="sidebar-link">启动图</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="reactnative-知识点记录"><a href="#reactnative-知识点记录" aria-hidden="true" class="header-anchor">#</a> ReactNative 知识点记录</h1> <h2 id="一、-数据-状态方案记录"><a href="#一、-数据-状态方案记录" aria-hidden="true" class="header-anchor">#</a> 一、 数据+状态方案记录</h2> <ol><li><p>页面发起 actions</p></li> <li><p>store 中掉接口</p></li> <li><p>接口通过 api 封装，非交互数据请求到后做 model 处理（仅部分数据做了）</p></li> <li><p>model 后的数据通过 reducer 存入 state</p></li> <li><p>通过 connect 将 state 按需注入页面</p></li></ol> <blockquote><p>形成闭环，首屏数据统一存入 state，api 和 action 结合，页面注入和触发，形成前端小范围 mvc 结构</p></blockquote> <h2 id="二、罗列知识点"><a href="#二、罗列知识点" aria-hidden="true" class="header-anchor">#</a> 二、罗列知识点</h2> <h3 id="基本知识"><a href="#基本知识" aria-hidden="true" class="header-anchor">#</a> 基本知识</h3> <ol><li><p>react 的 jsx 写法</p></li> <li><p>es6,7 用法</p></li> <li><p>react-native 提供的 api</p></li></ol> <h3 id="四大支柱"><a href="#四大支柱" aria-hidden="true" class="header-anchor">#</a> 四大支柱</h3> <ol><li><p>axios 封装和配置</p></li> <li><p>redux 生态链</p></li> <li><p>react-navigation 各项配置</p></li> <li><p>公共方法的归类和注入</p></li></ol> <h3 id="板块设计"><a href="#板块设计" aria-hidden="true" class="header-anchor">#</a> 板块设计</h3> <ol><li><p>板块规则</p></li> <li><p>组件树设计</p></li></ol> <h3 id="插件和原生"><a href="#插件和原生" aria-hidden="true" class="header-anchor">#</a> 插件和原生</h3> <ol><li><p>熟悉 react-native 社区</p></li> <li><p>看懂插件文档</p></li> <li><p>原生的基本知识</p></li></ol> <h2 id="三、-热更新和热部署"><a href="#三、-热更新和热部署" aria-hidden="true" class="header-anchor">#</a> 三、 热更新和热部署</h2> <blockquote><p>RN 最吸引人的特性就是可以在 ios 和安卓上实现热部署，避过 app store 的审查</p></blockquote> <h3 id="原理"><a href="#原理" aria-hidden="true" class="header-anchor">#</a> 原理</h3> <ol><li><p>本地代码集成 codepush 的 sdk</p></li> <li><p>将更新后的内容发布到 codepush</p></li> <li><p>本地代码每次打开时会比对 codepush 服务器上的版本和本地版本是否一致，不一致会触发更新</p></li> <li><p>实现实时更新</p></li></ol> <h3 id="具体配置地址"><a href="#具体配置地址" aria-hidden="true" class="header-anchor">#</a> 具体配置地址</h3> <p>https://www.jianshu.com/p/6a5e00d22723</p> <h3 id="一些命令"><a href="#一些命令" aria-hidden="true" class="header-anchor">#</a> 一些命令</h3> <ol><li><p>查看当前登录用户
<code>code-push whoami</code></p></li> <li><p>创建应用
// code-push app add 应用名 版本 平台
<code>code-push app add test-android android react-native</code></p></li> <li><p>查看当前已创建 app 应用列表
<code>code-push app list</code></p></li> <li><p>重命名 app：<code>code-push app rename &lt;appName&gt; &lt;newAppName&gt;</code></p></li> <li><p>移除 app：<code>code-push app rm &lt;appName&gt;</code></p></li> <li><p>查看 app 的部署：<code>code-push deployment ls &lt;appName&gt; [--displayKeys|-k]</code></p></li> <li><p>查看 app 的某个部署的发布更新的历史记录：<code>code-push deployment history &lt;appName&gt; &lt;deploymentName&gt; [--displayAuthor|-a]</code></p></li> <li><p>发布更新：<code>code-push release-react 《应用名》 ios -t &quot;1.0.0&quot; --des &quot;测试热更新&quot; -d Staging</code></p></li> <li><p>debug：<code>code-push debug &lt;platform&gt;</code></p></li> <li><p>查看已应用对应的 key 值 <code>code-push deployment ls 《应用名》 -k</code></p></li> <li><p>清空 app 的更新 <code>code-push deployment clear &lt;appName&gt; Production or Staging</code></p></li></ol> <h2 id="四、-react-navigation"><a href="#四、-react-navigation" aria-hidden="true" class="header-anchor">#</a> 四、 react-navigation</h2> <blockquote><p>RN 最常用的路由组件</p></blockquote> <h3 id="简介"><a href="#简介" aria-hidden="true" class="header-anchor">#</a> 简介</h3> <p>react-navigation 分为三个部分。</p> <ol><li><p>StackNavigator 类似顶部导航条，用来跳转页面和传递参数。</p></li> <li><p>TabNavigator 类似底部标签栏，用来区分模块。</p></li> <li><p>DrawerNavigator 抽屉，类似从 App 左侧滑出一个页面。</p></li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> TabNav <span class="token operator">=</span> <span class="token function">createBottomTabNavigator</span><span class="token punctuation">(</span>tabNavRouteConfig<span class="token punctuation">,</span> tabOptionConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> AppNavigator <span class="token operator">=</span> <span class="token function">createStackNavigator</span><span class="token punctuation">(</span>stackRouteConfig<span class="token punctuation">,</span> stakeOptionConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> AppContainer <span class="token operator">=</span> <span class="token function">createAppContainer</span><span class="token punctuation">(</span>AppNavigator<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span>AppContainer onNavigationStateChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onNavigationStateChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>routeConfig 为路由路径配置参数</p></li> <li><p>optionConfig 为导航定制相关参数</p></li> <li><p>AppContainer 将导航封装为组件</p></li> <li><p>appContainer 中的页面就可以使用<code>this.props.navigation.navigate(routeName,params)</code>跳转</p></li></ul> <h2 id="五、-三方处理"><a href="#五、-三方处理" aria-hidden="true" class="header-anchor">#</a> 五、 三方处理</h2> <h3 id="需要-link"><a href="#需要-link" aria-hidden="true" class="header-anchor">#</a> 需要 link</h3> <ol><li>react-native-device-info</li></ol> <p>注意 该库使用的是 androidx，和当前大部分 android support 不兼容</p> <ol start="2"><li><p>react-native-gesture-handler</p></li> <li><p>react-native-i18n</p></li> <li><p>react-native-image-crop-picker</p></li> <li><p>react-native-picker</p></li> <li><p>react-native-signature-capture</p></li> <li><p>react-native-splash-screen</p></li> <li><p>react-native-webview</p></li> <li><p>rn-fetch-blob</p></li></ol> <h2 id="六、-当-androidx-和-support-冲突时"><a href="#六、-当-androidx-和-support-冲突时" aria-hidden="true" class="header-anchor">#</a> 六、 当 androidx 和 support 冲突时</h2> <ol><li><p>通过./gradlew :app : dependencies 查看哪个依赖使用了 androidx</p></li> <li><p>回退该依赖为支持 support 的版本</p></li></ol> <h2 id="七、-集成自定义-iconfont"><a href="#七、-集成自定义-iconfont" aria-hidden="true" class="header-anchor">#</a> 七、 集成自定义 iconfont</h2> <ol><li><p>安装 react-native-vector-icons 插件</p></li> <li><p>书写 icon 组件，调用上述插件的 create 方法</p></li> <li><p>在阿里 iconfont 选择对应的 icon 并下载</p></li> <li><p>使用工具将 ttf 文件生成对应的 json 文件</p></li> <li><p>ios：将 ttf 文件引入 build phase 的 link 中</p></li> <li><p>ios: 在 info 中添加 iconfont.ttf 信息</p></li> <li><p>android: 在 app/build 中添加以下代码</p></li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>project<span class="token punctuation">.</span>ext<span class="token punctuation">.</span>vectoricons <span class="token operator">=</span> <span class="token punctuation">[</span>
    iconFontNames<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'iconfont.ttf'</span> <span class="token punctuation">]</span> <span class="token comment">//添加你需要赋值的字符文件</span>
<span class="token punctuation">]</span>
apply <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">&quot;../../node_modules/react-native-vector-icons/fonts.gradle&quot;</span>

</code></pre></div><ol start="8"><li>android: 将生成的 ttf 文件复制到 app/src/main/assets/fonts 文件中</li></ol> <h2 id="八、-国际化"><a href="#八、-国际化" aria-hidden="true" class="header-anchor">#</a> 八、 国际化</h2> <h3 id="问题"><a href="#问题" aria-hidden="true" class="header-anchor">#</a> 问题</h3> <ol><li><p>react-native-i18n 设置语言后无法实时更新</p></li> <li><p>页面必须手动触发 render 才会有效果</p></li> <li><p>react-navigation 中的 tabbar 和 title 也无法更新</p></li></ol> <h3 id="解决思路"><a href="#解决思路" aria-hidden="true" class="header-anchor">#</a> 解决思路</h3> <ol><li>所有页面都是由 react-navigation 包裹的，触发 react-navigation 的更新即可刷新所有页面</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">{</span> refresh <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Root<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>AppNavigator
      onNavigationStateChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onNavigationStateChange<span class="token punctuation">}</span>
      screenProps<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> refresh <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Root<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>通过 eventBus 触发 refresh 的更新</p> <ol start="2"><li>底部 tabbar 在页面渲染之前就生成了，故上述一对 tabbar 无效</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>AppNavigator
  onNavigationStateChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onNavigationStateChange<span class="token punctuation">}</span>
  screenProps<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> refresh<span class="token punctuation">,</span> tabLabel <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token function-variable function">navigationOptions</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> screenProps <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  tabBarLabel<span class="token punctuation">:</span> screenProps<span class="token punctuation">.</span>tabLabel<span class="token punctuation">.</span>home<span class="token punctuation">,</span>
  <span class="token function-variable function">tabBarIcon</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> tintColor<span class="token punctuation">,</span> focused <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Icon name<span class="token operator">=</span><span class="token punctuation">{</span>focused <span class="token operator">?</span> <span class="token string">&quot;home2&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;home1&quot;</span><span class="token punctuation">}</span> size<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">25</span><span class="token punctuation">}</span> color<span class="token operator">=</span><span class="token punctuation">{</span>tintColor<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
  header<span class="token punctuation">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>通过 ScreenProps 将值传入 createBottomTabNavigator，然后在跟页面里设置 ScreenProps，并在 eventBus 回调中动态改变</p> <h2 id="九、-启动图和图标"><a href="#九、-启动图和图标" aria-hidden="true" class="header-anchor">#</a> 九、 启动图和图标</h2> <h3 id="图标"><a href="#图标" aria-hidden="true" class="header-anchor">#</a> 图标</h3> <ol><li><p>ios:通过图标工厂制作不同尺寸图标</p></li> <li><p>ios:选择 images.xcassets,并按 appicon 的设置将不同尺寸的图片上传</p></li> <li><p>ios:在 general 中选择 appicon</p></li> <li><p>android:通过图标工厂制作不同尺寸的图片</p></li> <li><p>android:将图标放入 app/src/main/res 文件夹下</p></li> <li><p>android:在 androidManifest 中改图标名称</p></li></ol> <h3 id="启动图"><a href="#启动图" aria-hidden="true" class="header-anchor">#</a> 启动图</h3> <ol><li><p>通过图标工厂制作安卓和 ios 不同尺寸的图标</p></li> <li><p>ios: 在 images.xcassets 中添加 launchImages,并按尺寸上传</p></li> <li><p>ios:删除 launchScreen.xib 文件</p></li> <li><p>ios:general 中选择 launchImages,launchScreenfile 为空</p></li> <li><p>删除 app，重新加载</p></li> <li><p>android:将生成的图标放入 app/src/main/res 文件加下</p></li> <li><p>android: 在上述文件夹下新建 layout/launch_screen.xml，内容如下</p></li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>RelativeLayout xmlns<span class="token punctuation">:</span>android<span class="token operator">=</span><span class="token string">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    android<span class="token punctuation">:</span>orientation<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span> android<span class="token punctuation">:</span>layout_width<span class="token operator">=</span><span class="token string">&quot;match_parent&quot;</span>
    android<span class="token punctuation">:</span>layout_height<span class="token operator">=</span><span class="token string">&quot;match_parent&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ImageView android<span class="token punctuation">:</span>layout_width<span class="token operator">=</span><span class="token string">&quot;match_parent&quot;</span> android<span class="token punctuation">:</span>layout_height<span class="token operator">=</span><span class="token string">&quot;match_parent&quot;</span> android<span class="token punctuation">:</span>src<span class="token operator">=</span><span class="token string">&quot;@drawable/screen&quot;</span> android<span class="token punctuation">:</span>scaleType<span class="token operator">=</span><span class="token string">&quot;centerCrop&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>RelativeLayout<span class="token operator">&gt;</span>
</code></pre></div><ol start="8"><li>android: 新建 drawable/icon.png 文件，不然无法打包通过</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.0d710046.js" defer></script><script src="/blog/assets/js/2.3724615d.js" defer></script><script src="/blog/assets/js/19.0e5b6c69.js" defer></script>
  </body>
</html>
